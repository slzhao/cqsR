<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>R for Data Science Notes â€¢ cqsR</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="R for Data Science Notes">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">cqsR</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/limmaTestAndDesign.html">limma Test and Design</a>
    </li>
    <li>
      <a href="../articles/matchVcfToGr.html">Untitled</a>
    </li>
    <li>
      <a href="../articles/reportExample.html">Report Example</a>
    </li>
    <li>
      <a href="../articles/RforDataScienceNotes.html">R for Data Science Notes</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>R for Data Science Notes</h1>
                        <h4 class="author">Shilin Zhao</h4>
            
            <h4 class="date">8/27/2019</h4>
      
      
      <div class="hidden name"><code>RforDataScienceNotes.Rmd</code></div>

    </div>

    
    
<p><a href="https://r4ds.had.co.nz/" class="uri">https://r4ds.had.co.nz/</a></p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" title="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(tidyverse)</a></code></pre></div>
<pre><code>## Warning: package 'tidyverse' was built under R version 3.6.1</code></pre>
<pre><code>## -- Attaching packages ---------------------------------------------------------------------------------------------------------------------------- tidyverse 1.2.1 --</code></pre>
<pre><code>## v ggplot2 3.2.0     v purrr   0.3.2
## v tibble  2.1.3     v dplyr   0.8.3
## v tidyr   0.8.3     v stringr 1.4.0
## v readr   1.3.1     v forcats 0.4.0</code></pre>
<pre><code>## Warning: package 'tibble' was built under R version 3.6.1</code></pre>
<pre><code>## Warning: package 'tidyr' was built under R version 3.6.1</code></pre>
<pre><code>## Warning: package 'readr' was built under R version 3.6.1</code></pre>
<pre><code>## Warning: package 'purrr' was built under R version 3.6.1</code></pre>
<pre><code>## Warning: package 'dplyr' was built under R version 3.6.1</code></pre>
<pre><code>## Warning: package 'stringr' was built under R version 3.6.1</code></pre>
<pre><code>## Warning: package 'forcats' was built under R version 3.6.1</code></pre>
<pre><code>## -- Conflicts ------------------------------------------------------------------------------------------------------------------------------- tidyverse_conflicts() --
## x dplyr::filter() masks stats::filter()
## x dplyr::lag()    masks stats::lag()</code></pre>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb13-1" title="1"><span class="co">#library(dplyr)</span></a></code></pre></div>
<div id="dplyr-package" class="section level1">
<h1 class="hasAnchor">
<a href="#dplyr-package" class="anchor"></a>dplyr package</h1>
<div id="join" class="section level2">
<h2 class="hasAnchor">
<a href="#join" class="anchor"></a>join</h2>
<p>All columns from x or y will be kept. If multiple matches between x and y, all combinations of the matches are returned:</p>
<ul>
<li>inner_join: return all rows from x where there are matching values in y</li>
<li>left_join: return all rows from x</li>
<li>right_join: return all rows from y</li>
<li>full_join: return all rows and all columns from both x and y</li>
</ul>
<p>Filtering joins keep columns from x:</p>
<ul>
<li>semi_join: return all rows from x where there are matching values in y. It will never duplicate rows of x even if one row matching multiple y (as cloumns in y will not be kept, no need to duplicate rwo in x).</li>
<li>anti_join: return all rows from x where there are not matching values in y</li>
</ul>
<p>Nesting joins create a list column of for columns from y:</p>
<ul>
<li>nest_join: return all rows and all columns from x. Adds a list column of tibbles. Each tibble contains all the rows from y that match that row of x.</li>
</ul>
</div>
<div id="top_n-top_frac-first-rows-by-value" class="section level2">
<h2 class="hasAnchor">
<a href="#top_n-top_frac-first-rows-by-value" class="anchor"></a>top_n, top_frac: first rows by value</h2>
</div>
<div id="slice-first-rows-by-position" class="section level2">
<h2 class="hasAnchor">
<a href="#slice-first-rows-by-position" class="anchor"></a>slice: first rows by position</h2>
</div>
<div id="between" class="section level2">
<h2 class="hasAnchor">
<a href="#between" class="anchor"></a>between</h2>
</div>
</div>
<div id="readr-package" class="section level1">
<h1 class="hasAnchor">
<a href="#readr-package" class="anchor"></a>readr package</h1>
<div id="read_tsv-read_csv-read_delim" class="section level2">
<h2 class="hasAnchor">
<a href="#read_tsv-read_csv-read_delim" class="anchor"></a>read_tsv, read_csv, read_delim</h2>
</div>
</div>
<div id="functions" class="section level1">
<h1 class="hasAnchor">
<a href="#functions" class="anchor"></a>Functions</h1>
<div id="mutate-make-new-variable" class="section level2">
<h2 class="hasAnchor">
<a href="#mutate-make-new-variable" class="anchor"></a>mutate: Make new variable</h2>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb14-1" title="1">table1 <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb14-2" title="2"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">rate =</span> cases <span class="op">/</span><span class="st"> </span>population <span class="op">*</span><span class="st"> </span><span class="dv">10000</span>)</a></code></pre></div>
<pre><code>## # A tibble: 6 x 5
##   country      year  cases population  rate
##   &lt;chr&gt;       &lt;int&gt;  &lt;int&gt;      &lt;int&gt; &lt;dbl&gt;
## 1 Afghanistan  1999    745   19987071 0.373
## 2 Afghanistan  2000   2666   20595360 1.29 
## 3 Brazil       1999  37737  172006362 2.19 
## 4 Brazil       2000  80488  174504898 4.61 
## 5 China        1999 212258 1272915272 1.67 
## 6 China        2000 213766 1280428583 1.67</code></pre>
</div>
<div id="mutatecase_when" class="section level2">
<h2 class="hasAnchor">
<a href="#mutatecase_when" class="anchor"></a>mutate+case_when</h2>
</div>
<div id="group_by-takes-an-existing-tbl-and-converts-it-into-a-grouped-tbl" class="section level2">
<h2 class="hasAnchor">
<a href="#group_by-takes-an-existing-tbl-and-converts-it-into-a-grouped-tbl" class="anchor"></a>group_by: takes an existing tbl and converts it into a grouped tbl</h2>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb16-1" title="1">by_cyl &lt;-<span class="st"> </span>mtcars <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">group_by</span>(cyl)</a>
<a class="sourceLine" id="cb16-2" title="2"></a>
<a class="sourceLine" id="cb16-3" title="3"><span class="co"># grouping doesn't change how the data looks (apart from listing</span></a>
<a class="sourceLine" id="cb16-4" title="4"><span class="co"># how it's grouped):</span></a>
<a class="sourceLine" id="cb16-5" title="5">by_cyl</a></code></pre></div>
<pre><code>## # A tibble: 32 x 11
## # Groups:   cyl [3]
##      mpg   cyl  disp    hp  drat    wt  qsec    vs    am  gear  carb
##  * &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
##  1  21       6  160    110  3.9   2.62  16.5     0     1     4     4
##  2  21       6  160    110  3.9   2.88  17.0     0     1     4     4
##  3  22.8     4  108     93  3.85  2.32  18.6     1     1     4     1
##  4  21.4     6  258    110  3.08  3.22  19.4     1     0     3     1
##  5  18.7     8  360    175  3.15  3.44  17.0     0     0     3     2
##  6  18.1     6  225    105  2.76  3.46  20.2     1     0     3     1
##  7  14.3     8  360    245  3.21  3.57  15.8     0     0     3     4
##  8  24.4     4  147.    62  3.69  3.19  20       1     0     4     2
##  9  22.8     4  141.    95  3.92  3.15  22.9     1     0     4     2
## 10  19.2     6  168.   123  3.92  3.44  18.3     1     0     4     4
## # ... with 22 more rows</code></pre>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb18-1" title="1"><span class="co"># It changes how it acts with the other dplyr verbs:</span></a>
<a class="sourceLine" id="cb18-2" title="2">by_cyl <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">summarise</span>(</a>
<a class="sourceLine" id="cb18-3" title="3">  <span class="dt">disp =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/mean">mean</a></span>(disp),</a>
<a class="sourceLine" id="cb18-4" title="4">  <span class="dt">hp =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/mean">mean</a></span>(hp)</a>
<a class="sourceLine" id="cb18-5" title="5">)</a></code></pre></div>
<pre><code>## # A tibble: 3 x 3
##     cyl  disp    hp
##   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
## 1     4  105.  82.6
## 2     6  183. 122. 
## 3     8  353. 209.</code></pre>
</div>
<div id="count-count-number-per-factor" class="section level2">
<h2 class="hasAnchor">
<a href="#count-count-number-per-factor" class="anchor"></a>count: Count number per factor</h2>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb20-1" title="1"><span class="co">#sum (count) of manufacturer</span></a>
<a class="sourceLine" id="cb20-2" title="2">mpg <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb20-3" title="3"><span class="st">  </span><span class="kw">count</span>(manufacturer)</a></code></pre></div>
<pre><code>## # A tibble: 15 x 2
##    manufacturer     n
##    &lt;chr&gt;        &lt;int&gt;
##  1 audi            18
##  2 chevrolet       19
##  3 dodge           37
##  4 ford            25
##  5 honda            9
##  6 hyundai         14
##  7 jeep             8
##  8 land rover       4
##  9 lincoln          3
## 10 mercury          4
## 11 nissan          13
## 12 pontiac          5
## 13 subaru          14
## 14 toyota          34
## 15 volkswagen      27</code></pre>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb22-1" title="1"><span class="co">#sum of hwy by manufacturer</span></a>
<a class="sourceLine" id="cb22-2" title="2">mpg <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb22-3" title="3"><span class="st">  </span><span class="kw">count</span>(manufacturer,<span class="dt">wt=</span>hwy)</a></code></pre></div>
<pre><code>## # A tibble: 15 x 2
##    manufacturer     n
##    &lt;chr&gt;        &lt;int&gt;
##  1 audi           476
##  2 chevrolet      416
##  3 dodge          664
##  4 ford           484
##  5 honda          293
##  6 hyundai        376
##  7 jeep           141
##  8 land rover      66
##  9 lincoln         51
## 10 mercury         72
## 11 nissan         320
## 12 pontiac        132
## 13 subaru         358
## 14 toyota         847
## 15 volkswagen     789</code></pre>
</div>
<div id="gather-takes-multiple-columns-and-collapses-into-key-value-pairs" class="section level2">
<h2 class="hasAnchor">
<a href="#gather-takes-multiple-columns-and-collapses-into-key-value-pairs" class="anchor"></a>gather: takes multiple columns and collapses into key-value pairs</h2>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb24-1" title="1"><span class="co"># From http://stackoverflow.com/questions/1181060</span></a>
<a class="sourceLine" id="cb24-2" title="2">stocks &lt;-<span class="st"> </span><span class="kw">tibble</span>(</a>
<a class="sourceLine" id="cb24-3" title="3">  <span class="dt">time =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/as.Date">as.Date</a></span>(<span class="st">'2009-01-01'</span>) <span class="op">+</span><span class="st"> </span><span class="dv">0</span><span class="op">:</span><span class="dv">9</span>,</a>
<a class="sourceLine" id="cb24-4" title="4">  <span class="dt">X =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/stats/topics/Normal">rnorm</a></span>(<span class="dv">10</span>, <span class="dv">0</span>, <span class="dv">1</span>),</a>
<a class="sourceLine" id="cb24-5" title="5">  <span class="dt">Y =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/stats/topics/Normal">rnorm</a></span>(<span class="dv">10</span>, <span class="dv">0</span>, <span class="dv">2</span>),</a>
<a class="sourceLine" id="cb24-6" title="6">  <span class="dt">Z =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/stats/topics/Normal">rnorm</a></span>(<span class="dv">10</span>, <span class="dv">0</span>, <span class="dv">4</span>)</a>
<a class="sourceLine" id="cb24-7" title="7">)</a>
<a class="sourceLine" id="cb24-8" title="8"><span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/head">head</a></span>(stocks)</a></code></pre></div>
<pre><code>## # A tibble: 6 x 4
##   time            X      Y       Z
##   &lt;date&gt;      &lt;dbl&gt;  &lt;dbl&gt;   &lt;dbl&gt;
## 1 2009-01-01  2.91  -0.297 -1.04  
## 2 2009-01-02  0.573 -1.88  -0.980 
## 3 2009-01-03  0.484 -1.42   5.67  
## 4 2009-01-04  0.427  2.70   5.29  
## 5 2009-01-05  2.69   0.692  5.82  
## 6 2009-01-06 -1.51   1.06  -0.0359</code></pre>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb26-1" title="1"><span class="co">#use everything except "time" as values. "stock" and "price" as new variable names for key and value</span></a>
<a class="sourceLine" id="cb26-2" title="2"><span class="kw">gather</span>(stocks, <span class="st">"stock"</span>, <span class="st">"price"</span>, <span class="op">-</span>time)</a></code></pre></div>
<pre><code>## # A tibble: 30 x 3
##    time       stock  price
##    &lt;date&gt;     &lt;chr&gt;  &lt;dbl&gt;
##  1 2009-01-01 X      2.91 
##  2 2009-01-02 X      0.573
##  3 2009-01-03 X      0.484
##  4 2009-01-04 X      0.427
##  5 2009-01-05 X      2.69 
##  6 2009-01-06 X     -1.51 
##  7 2009-01-07 X     -1.36 
##  8 2009-01-08 X     -1.30 
##  9 2009-01-09 X      0.977
## 10 2009-01-10 X     -1.26 
## # ... with 20 more rows</code></pre>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb28-1" title="1"><span class="co">#use X, Y, Z as values, so don't need -time. "stock" and "price" as new variable names for key and value</span></a>
<a class="sourceLine" id="cb28-2" title="2">stocks <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">gather</span>(<span class="st">"X"</span>, <span class="st">"Y"</span>,<span class="st">"Z"</span>,<span class="dt">key=</span><span class="st">"stock"</span>,<span class="dt">value=</span><span class="st">"price"</span>)</a></code></pre></div>
<pre><code>## # A tibble: 30 x 3
##    time       stock  price
##    &lt;date&gt;     &lt;chr&gt;  &lt;dbl&gt;
##  1 2009-01-01 X      2.91 
##  2 2009-01-02 X      0.573
##  3 2009-01-03 X      0.484
##  4 2009-01-04 X      0.427
##  5 2009-01-05 X      2.69 
##  6 2009-01-06 X     -1.51 
##  7 2009-01-07 X     -1.36 
##  8 2009-01-08 X     -1.30 
##  9 2009-01-09 X      0.977
## 10 2009-01-10 X     -1.26 
## # ... with 20 more rows</code></pre>
</div>
<div id="spread-opposite-of-gathering--use-it-when-an-observation-is-scattered-across-multiple-rows-" class="section level2">
<h2 class="hasAnchor">
<a href="#spread-opposite-of-gathering--use-it-when-an-observation-is-scattered-across-multiple-rows-" class="anchor"></a>spread: opposite of gathering. use it when an observation is scattered across multiple rows.</h2>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb30-1" title="1">stocksm &lt;-<span class="st"> </span>stocks <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">gather</span>(stock, price, <span class="op">-</span>time)</a>
<a class="sourceLine" id="cb30-2" title="2"><span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/head">head</a></span>(stocksm)</a></code></pre></div>
<pre><code>## # A tibble: 6 x 3
##   time       stock  price
##   &lt;date&gt;     &lt;chr&gt;  &lt;dbl&gt;
## 1 2009-01-01 X      2.91 
## 2 2009-01-02 X      0.573
## 3 2009-01-03 X      0.484
## 4 2009-01-04 X      0.427
## 5 2009-01-05 X      2.69 
## 6 2009-01-06 X     -1.51</code></pre>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb32-1" title="1">stocksm <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">spread</span>(stock, price)</a></code></pre></div>
<pre><code>## # A tibble: 10 x 4
##    time            X      Y       Z
##    &lt;date&gt;      &lt;dbl&gt;  &lt;dbl&gt;   &lt;dbl&gt;
##  1 2009-01-01  2.91  -0.297 -1.04  
##  2 2009-01-02  0.573 -1.88  -0.980 
##  3 2009-01-03  0.484 -1.42   5.67  
##  4 2009-01-04  0.427  2.70   5.29  
##  5 2009-01-05  2.69   0.692  5.82  
##  6 2009-01-06 -1.51   1.06  -0.0359
##  7 2009-01-07 -1.36  -0.687  2.93  
##  8 2009-01-08 -1.30  -3.04  -2.85  
##  9 2009-01-09  0.977  0.604  8.07  
## 10 2009-01-10 -1.26  -0.437 -2.75</code></pre>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb34-1" title="1">stocksm <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">spread</span>(time, price)</a></code></pre></div>
<pre><code>## # A tibble: 3 x 11
##   stock `2009-01-01` `2009-01-02` `2009-01-03` `2009-01-04` `2009-01-05`
##   &lt;chr&gt;        &lt;dbl&gt;        &lt;dbl&gt;        &lt;dbl&gt;        &lt;dbl&gt;        &lt;dbl&gt;
## 1 X            2.91         0.573        0.484        0.427        2.69 
## 2 Y           -0.297       -1.88        -1.42         2.70         0.692
## 3 Z           -1.04        -0.980        5.67         5.29         5.82 
## # ... with 5 more variables: `2009-01-06` &lt;dbl&gt;, `2009-01-07` &lt;dbl&gt;,
## #   `2009-01-08` &lt;dbl&gt;, `2009-01-09` &lt;dbl&gt;, `2009-01-10` &lt;dbl&gt;</code></pre>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb36-1" title="1"><span class="co">#If duplicate row identifiers and want to keep all of them</span></a>
<a class="sourceLine" id="cb36-2" title="2"><span class="co">#https://github.com/tidyverse/tidyr/issues/426</span></a>
<a class="sourceLine" id="cb36-3" title="3"><span class="co">#https://www.r-bloggers.com/workaround-for-tidyrspread-with-duplicate-row-identifiers/</span></a>
<a class="sourceLine" id="cb36-4" title="4">df=<span class="kw">tibble</span>(<span class="dt">age=</span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="dv">21</span>,<span class="dv">17</span>,<span class="dv">32</span>,<span class="dv">38</span>,<span class="dv">35</span>),<span class="dt">gender=</span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">"Male"</span>,<span class="st">"Female"</span>,<span class="st">"Female"</span>,<span class="st">"Male"</span>,<span class="st">"Male"</span>))</a>
<a class="sourceLine" id="cb36-5" title="5">df &lt;-<span class="st"> </span>df <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb36-6" title="6"><span class="st">  </span><span class="kw">group_by</span>(gender) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb36-7" title="7"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">grouped_id =</span> <span class="kw">row_number</span>())</a>
<a class="sourceLine" id="cb36-8" title="8">df</a></code></pre></div>
<pre><code>## # A tibble: 5 x 3
## # Groups:   gender [2]
##     age gender grouped_id
##   &lt;dbl&gt; &lt;chr&gt;       &lt;int&gt;
## 1    21 Male            1
## 2    17 Female          1
## 3    32 Female          2
## 4    38 Male            2
## 5    35 Male            3</code></pre>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb38-1" title="1">df <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb38-2" title="2"><span class="st">  </span><span class="kw">spread</span>(gender, age) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb38-3" title="3"><span class="st">  </span><span class="kw">select</span>(<span class="op">-</span>grouped_id)</a></code></pre></div>
<pre><code>## # A tibble: 3 x 2
##   Female  Male
##    &lt;dbl&gt; &lt;dbl&gt;
## 1     17    21
## 2     32    38
## 3     NA    35</code></pre>
</div>
<div id="separate-pulls-apart-one-column-into-multiple-columns-by-splitting-wherever-a-separator-character-appears" class="section level2">
<h2 class="hasAnchor">
<a href="#separate-pulls-apart-one-column-into-multiple-columns-by-splitting-wherever-a-separator-character-appears" class="anchor"></a>separate: pulls apart one column into multiple columns, by splitting wherever a separator character appears</h2>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb40-1" title="1">df &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/data.frame">data.frame</a></span>(<span class="dt">x =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="ot">NA</span>, <span class="st">"a.b"</span>, <span class="st">"a.d"</span>, <span class="st">"b.c"</span>))</a>
<a class="sourceLine" id="cb40-2" title="2">df <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">separate</span>(x, <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">"A"</span>, <span class="st">"B"</span>))</a></code></pre></div>
<pre><code>##      A    B
## 1 &lt;NA&gt; &lt;NA&gt;
## 2    a    b
## 3    a    d
## 4    b    c</code></pre>
<div class="sourceCode" id="cb42"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb42-1" title="1"><span class="co"># If you just want the second variable:</span></a>
<a class="sourceLine" id="cb42-2" title="2">df <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">separate</span>(x, <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="ot">NA</span>, <span class="st">"B"</span>))</a></code></pre></div>
<pre><code>##      B
## 1 &lt;NA&gt;
## 2    b
## 3    d
## 4    c</code></pre>
<div class="sourceCode" id="cb44"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb44-1" title="1"><span class="co">#use extra and fill arguments to control what happens</span></a>
<a class="sourceLine" id="cb44-2" title="2">df &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/data.frame">data.frame</a></span>(<span class="dt">x =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">"a"</span>, <span class="st">"a b"</span>, <span class="st">"a b c"</span>, <span class="ot">NA</span>))</a>
<a class="sourceLine" id="cb44-3" title="3">df <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">separate</span>(x, <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">"a"</span>, <span class="st">"b"</span>))</a></code></pre></div>
<pre><code>## Warning: Expected 2 pieces. Additional pieces discarded in 1 rows [3].</code></pre>
<pre><code>## Warning: Expected 2 pieces. Missing pieces filled with `NA` in 1 rows [1].</code></pre>
<pre><code>##      a    b
## 1    a &lt;NA&gt;
## 2    a    b
## 3    a    b
## 4 &lt;NA&gt; &lt;NA&gt;</code></pre>
<div class="sourceCode" id="cb48"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb48-1" title="1"><span class="co"># The same behaviour drops the c but no warnings</span></a>
<a class="sourceLine" id="cb48-2" title="2">df <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">separate</span>(x, <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">"a"</span>, <span class="st">"b"</span>), <span class="dt">extra =</span> <span class="st">"drop"</span>, <span class="dt">fill =</span> <span class="st">"right"</span>)</a></code></pre></div>
<pre><code>##      a    b
## 1    a &lt;NA&gt;
## 2    a    b
## 3    a    b
## 4 &lt;NA&gt; &lt;NA&gt;</code></pre>
<div class="sourceCode" id="cb50"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb50-1" title="1"><span class="co"># If only want to split specified number of times use extra = "merge"</span></a>
<a class="sourceLine" id="cb50-2" title="2">df &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/data.frame">data.frame</a></span>(<span class="dt">x =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">"x: 123"</span>, <span class="st">"y: error: 7"</span>))</a>
<a class="sourceLine" id="cb50-3" title="3">df <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">separate</span>(x, <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">"key"</span>, <span class="st">"value"</span>), <span class="st">": "</span>, <span class="dt">extra =</span> <span class="st">"merge"</span>)</a></code></pre></div>
<pre><code>##   key    value
## 1   x      123
## 2   y error: 7</code></pre>
<div class="sourceCode" id="cb52"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb52-1" title="1"><span class="co"># convert = TRUE detects column classes</span></a>
<a class="sourceLine" id="cb52-2" title="2"><span class="co"># Argument col can take quasiquotation to work with strings</span></a>
<a class="sourceLine" id="cb52-3" title="3">var &lt;-<span class="st"> "x"</span></a>
<a class="sourceLine" id="cb52-4" title="4">df <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">separate</span>(<span class="op">!!</span>var, <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">"key"</span>,<span class="st">"value"</span>), <span class="st">":"</span>)</a></code></pre></div>
<pre><code>## Warning: Expected 2 pieces. Additional pieces discarded in 1 rows [2].</code></pre>
<pre><code>##   key  value
## 1   x    123
## 2   y  error</code></pre>
</div>
<div id="unite-is-the-inverse-of-separate-it-combines-multiple-columns-into-a-single-column-" class="section level2">
<h2 class="hasAnchor">
<a href="#unite-is-the-inverse-of-separate-it-combines-multiple-columns-into-a-single-column-" class="anchor"></a>unite: is the inverse of separate(): it combines multiple columns into a single column.</h2>
<div class="sourceCode" id="cb55"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb55-1" title="1"><span class="kw">unite</span>(mtcars, <span class="st">"vs_am"</span>, <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">"vs"</span>,<span class="st">"am"</span>))</a></code></pre></div>
<pre><code>##                      mpg cyl  disp  hp drat    wt  qsec vs_am gear carb
## Mazda RX4           21.0   6 160.0 110 3.90 2.620 16.46   0_1    4    4
## Mazda RX4 Wag       21.0   6 160.0 110 3.90 2.875 17.02   0_1    4    4
## Datsun 710          22.8   4 108.0  93 3.85 2.320 18.61   1_1    4    1
## Hornet 4 Drive      21.4   6 258.0 110 3.08 3.215 19.44   1_0    3    1
## Hornet Sportabout   18.7   8 360.0 175 3.15 3.440 17.02   0_0    3    2
## Valiant             18.1   6 225.0 105 2.76 3.460 20.22   1_0    3    1
## Duster 360          14.3   8 360.0 245 3.21 3.570 15.84   0_0    3    4
## Merc 240D           24.4   4 146.7  62 3.69 3.190 20.00   1_0    4    2
## Merc 230            22.8   4 140.8  95 3.92 3.150 22.90   1_0    4    2
## Merc 280            19.2   6 167.6 123 3.92 3.440 18.30   1_0    4    4
## Merc 280C           17.8   6 167.6 123 3.92 3.440 18.90   1_0    4    4
## Merc 450SE          16.4   8 275.8 180 3.07 4.070 17.40   0_0    3    3
## Merc 450SL          17.3   8 275.8 180 3.07 3.730 17.60   0_0    3    3
## Merc 450SLC         15.2   8 275.8 180 3.07 3.780 18.00   0_0    3    3
## Cadillac Fleetwood  10.4   8 472.0 205 2.93 5.250 17.98   0_0    3    4
## Lincoln Continental 10.4   8 460.0 215 3.00 5.424 17.82   0_0    3    4
## Chrysler Imperial   14.7   8 440.0 230 3.23 5.345 17.42   0_0    3    4
## Fiat 128            32.4   4  78.7  66 4.08 2.200 19.47   1_1    4    1
## Honda Civic         30.4   4  75.7  52 4.93 1.615 18.52   1_1    4    2
## Toyota Corolla      33.9   4  71.1  65 4.22 1.835 19.90   1_1    4    1
## Toyota Corona       21.5   4 120.1  97 3.70 2.465 20.01   1_0    3    1
## Dodge Challenger    15.5   8 318.0 150 2.76 3.520 16.87   0_0    3    2
## AMC Javelin         15.2   8 304.0 150 3.15 3.435 17.30   0_0    3    2
## Camaro Z28          13.3   8 350.0 245 3.73 3.840 15.41   0_0    3    4
## Pontiac Firebird    19.2   8 400.0 175 3.08 3.845 17.05   0_0    3    2
## Fiat X1-9           27.3   4  79.0  66 4.08 1.935 18.90   1_1    4    1
## Porsche 914-2       26.0   4 120.3  91 4.43 2.140 16.70   0_1    5    2
## Lotus Europa        30.4   4  95.1 113 3.77 1.513 16.90   1_1    5    2
## Ford Pantera L      15.8   8 351.0 264 4.22 3.170 14.50   0_1    5    4
## Ferrari Dino        19.7   6 145.0 175 3.62 2.770 15.50   0_1    5    6
## Maserati Bora       15.0   8 301.0 335 3.54 3.570 14.60   0_1    5    8
## Volvo 142E          21.4   4 121.0 109 4.11 2.780 18.60   1_1    4    2</code></pre>
<p>#tidyr package</p>
</div>
<div id="separate_rows-separate-a-collapsed-column-into-multiple-rows" class="section level2">
<h2 class="hasAnchor">
<a href="#separate_rows-separate-a-collapsed-column-into-multiple-rows" class="anchor"></a>separate_rows: Separate a collapsed column into multiple rows</h2>
<div class="sourceCode" id="cb57"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb57-1" title="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(tidyr)</a>
<a class="sourceLine" id="cb57-2" title="2"><span class="co">#If more than one column, should have the same number of rows after seprate</span></a>
<a class="sourceLine" id="cb57-3" title="3">df &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/data.frame">data.frame</a></span>(</a>
<a class="sourceLine" id="cb57-4" title="4">  <span class="dt">x =</span> <span class="dv">1</span><span class="op">:</span><span class="dv">3</span>,</a>
<a class="sourceLine" id="cb57-5" title="5">  <span class="dt">y =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">"a"</span>, <span class="st">"d,e,f"</span>, <span class="st">"g,h"</span>),</a>
<a class="sourceLine" id="cb57-6" title="6">  <span class="dt">z =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">"1"</span>, <span class="st">"2,3,4"</span>, <span class="st">"5,6"</span>),</a>
<a class="sourceLine" id="cb57-7" title="7">  <span class="dt">stringsAsFactors =</span> <span class="ot">FALSE</span></a>
<a class="sourceLine" id="cb57-8" title="8">)</a>
<a class="sourceLine" id="cb57-9" title="9"><span class="kw">separate_rows</span>(df, y, z, <span class="dt">convert =</span> <span class="ot">TRUE</span>)</a></code></pre></div>
<pre><code>##   x y z
## 1 1 a 1
## 2 2 d 2
## 3 2 e 3
## 4 2 f 4
## 5 3 g 5
## 6 3 h 6</code></pre>
</div>
</div>
<div id="purrr-package" class="section level1">
<h1 class="hasAnchor">
<a href="#purrr-package" class="anchor"></a>purrr package</h1>
<div id="reduce-combines-the-elements-of-a-vector-into-a-single-value" class="section level2">
<h2 class="hasAnchor">
<a href="#reduce-combines-the-elements-of-a-vector-into-a-single-value" class="anchor"></a>reduce: combines the elements of a vector into a single value</h2>
</div>
</div>
<div id="other-notes" class="section level1">
<h1 class="hasAnchor">
<a href="#other-notes" class="anchor"></a>Other notes</h1>
<div id="tidyeval" class="section level2">
<h2 class="hasAnchor">
<a href="#tidyeval" class="anchor"></a>tidyeval</h2>
<div class="sourceCode" id="cb59"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb59-1" title="1"><span class="co">#sym() creates a symbol from a string and syms() creates a list of symbols from a character vector.</span></a>
<a class="sourceLine" id="cb59-2" title="2"></a>
<a class="sourceLine" id="cb59-3" title="3">df &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/data.frame">data.frame</a></span>(<span class="dt">x =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">"a"</span>, <span class="st">"a b"</span>, <span class="st">"a b c"</span>, <span class="ot">NA</span>))</a>
<a class="sourceLine" id="cb59-4" title="4"></a>
<a class="sourceLine" id="cb59-5" title="5">var &lt;-<span class="st"> "x"</span></a>
<a class="sourceLine" id="cb59-6" title="6">df <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">separate</span>(<span class="op">!!</span>var, <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">"key"</span>,<span class="st">"value"</span>,<span class="st">"note"</span>), <span class="st">" "</span>)</a></code></pre></div>
<pre><code>## Warning: Expected 3 pieces. Missing pieces filled with `NA` in 2 rows [1,
## 2].</code></pre>
<pre><code>##    key value note
## 1    a  &lt;NA&gt; &lt;NA&gt;
## 2    a     b &lt;NA&gt;
## 3    a     b    c
## 4 &lt;NA&gt;  &lt;NA&gt; &lt;NA&gt;</code></pre>
<div class="sourceCode" id="cb62"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb62-1" title="1">df <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">summarise</span>(<span class="dt">n=</span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/length">length</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/grep">grep</a></span>(<span class="st">" "</span>,x))) <span class="co">#2</span></a></code></pre></div>
<pre><code>##   n
## 1 2</code></pre>
<div class="sourceCode" id="cb64"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb64-1" title="1">df <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">summarise</span>(<span class="dt">n=</span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/length">length</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/grep">grep</a></span>(<span class="st">" "</span>,<span class="op">!!</span>var))) <span class="co">#0, as it grep in value of x</span></a></code></pre></div>
<pre><code>##   n
## 1 0</code></pre>
<div class="sourceCode" id="cb66"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb66-1" title="1">df <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">summarise</span>(<span class="dt">n=</span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/length">length</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/grep">grep</a></span>(<span class="st">" "</span>,<span class="op">!!</span><span class="kw">sym</span>(var)))) <span class="co">#2, correct</span></a></code></pre></div>
<pre><code>##   n
## 1 2</code></pre>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li>
<a href="#dplyr-package">dplyr package</a><ul class="nav nav-pills nav-stacked">
<li><a href="#join">join</a></li>
      <li><a href="#top_n-top_frac-first-rows-by-value">top_n, top_frac: first rows by value</a></li>
      <li><a href="#slice-first-rows-by-position">slice: first rows by position</a></li>
      <li><a href="#between">between</a></li>
      </ul>
</li>
      <li>
<a href="#readr-package">readr package</a><ul class="nav nav-pills nav-stacked">
<li><a href="#read_tsv-read_csv-read_delim">read_tsv, read_csv, read_delim</a></li>
      </ul>
</li>
      <li>
<a href="#functions">Functions</a><ul class="nav nav-pills nav-stacked">
<li><a href="#mutate-make-new-variable">mutate: Make new variable</a></li>
      <li><a href="#mutatecase_when">mutate+case_when</a></li>
      <li><a href="#group_by-takes-an-existing-tbl-and-converts-it-into-a-grouped-tbl">group_by: takes an existing tbl and converts it into a grouped tbl</a></li>
      <li><a href="#count-count-number-per-factor">count: Count number per factor</a></li>
      <li><a href="#gather-takes-multiple-columns-and-collapses-into-key-value-pairs">gather: takes multiple columns and collapses into key-value pairs</a></li>
      <li><a href="#spread-opposite-of-gathering--use-it-when-an-observation-is-scattered-across-multiple-rows-">spread: opposite of gathering. use it when an observation is scattered across multiple rows.</a></li>
      <li><a href="#separate-pulls-apart-one-column-into-multiple-columns-by-splitting-wherever-a-separator-character-appears">separate: pulls apart one column into multiple columns, by splitting wherever a separator character appears</a></li>
      <li><a href="#unite-is-the-inverse-of-separate-it-combines-multiple-columns-into-a-single-column-">unite: is the inverse of separate(): it combines multiple columns into a single column.</a></li>
      <li><a href="#separate_rows-separate-a-collapsed-column-into-multiple-rows">separate_rows: Separate a collapsed column into multiple rows</a></li>
      </ul>
</li>
      <li>
<a href="#purrr-package">purrr package</a><ul class="nav nav-pills nav-stacked">
<li><a href="#reduce-combines-the-elements-of-a-vector-into-a-single-value">reduce: combines the elements of a vector into a single value</a></li>
      </ul>
</li>
      <li>
<a href="#other-notes">Other notes</a><ul class="nav nav-pills nav-stacked">
<li><a href="#tidyeval">tidyeval</a></li>
      </ul>
</li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by The package maintainer.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.</p>
</div>
      </footer>
</div>

  

  </body>
</html>
